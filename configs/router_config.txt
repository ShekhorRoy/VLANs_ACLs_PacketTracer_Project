enable
configure terminal

interface gigabitEthernet0/0.10
encapsulation dot1q 10
ip address 192.168.10.1 255.255.255.0
exit
interface gigabitEthernet0/0.20
encapsulation dot1q 20
ip address 192.168.20.1 255.255.255.0
exit
interface gigabitEthernet0/0.30
encapsulation dot1q 30
ip address 192.168.30.1 255.255.255.0
exit

access-list 100 permit ip 192.168.10.0 0.0.0.255 any
access-list 100 deny ip 192.168.20.0 0.0.0.255 192.168.10.0 0.0.0.255
access-list 100 permit ip 192.168.20.0 0.0.0.255 192.168.30.0 0.0.0.255
access-list 100 deny ip 192.168.30.0 0.0.0.255 any
access-list 100 permit ip any any

interface gigabitEthernet0/0
ip access-group 100 in
exit

end
write memory
